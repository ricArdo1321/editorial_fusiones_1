"use strict";(()=>{var t={};t.id=557,t.ids=[557],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},921:(t,e,r)=>{r.r(e),r.d(e,{headerHooks:()=>m,originalPathname:()=>g,patchFetch:()=>E,requestAsyncStorage:()=>f,routeModule:()=>p,serverHooks:()=>w,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>y});var o={};r.r(o),r.d(o,{DELETE:()=>l,GET:()=>u,PUT:()=>d});var a=r(5419),n=r(9108),s=r(9678),i=r(8070),c=r(3933);async function u(t,{params:e}){try{let t=await (0,c.r4)(parseInt(e.id));if(!t)return i.Z.json({error:"Post not found"},{status:404});return i.Z.json(t)}catch(t){return console.error("Error fetching post:",t),i.Z.json({error:"Failed to fetch post"},{status:500})}}async function d(t,{params:e}){try{let r=await t.json(),o=await (0,c.CP)(parseInt(e.id),r);return i.Z.json(o)}catch(t){return console.error("Error updating post:",t),i.Z.json({error:"Failed to update post"},{status:500})}}async function l(t,{params:e}){try{return await (0,c.fR)(parseInt(e.id)),i.Z.json({success:!0})}catch(t){return console.error("Error deleting post:",t),i.Z.json({error:"Failed to delete post"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/posts/[id]/route",pathname:"/api/admin/posts/[id]",filename:"route",bundlePath:"app/api/admin/posts/[id]/route"},resolvedPagePath:"/home/ricardo/editorial_fusiones_1/app/api/admin/posts/[id]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:w,headerHooks:m,staticGenerationBailout:y}=p,g="/api/admin/posts/[id]/route";function E(){return(0,s.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:h})}},3933:(t,e,r)=>{r.d(e,{CP:()=>w,EC:()=>y,IY:()=>g,Jq:()=>u,MC:()=>b,a7:()=>p,el:()=>l,fR:()=>m,qb:()=>h,r4:()=>f,u8:()=>E,zQ:()=>d});let o=process.env.WORDPRESS_API_URL||"https://cms.editorialfusiones.com/wp-json/wp/v2",a=process.env.WORDPRESS_USER||"",n=process.env.WORDPRESS_APP_PASSWORD||"";function s(t){return{id:t.id,slug:t.slug,title:t.title.rendered,excerpt:t.excerpt.rendered.replace(/<[^>]*>/g,"").trim(),content:t.content.rendered,date:new Date(t.date).toLocaleDateString("es-ES"),status:t.status,image:t._embedded?.["wp:featuredmedia"]?.[0]?.source_url}}function i(t){return{id:t.id,slug:t.slug,title:t.title.rendered,author:t.acf?.autor||"",isbn:t.acf?.isbn||"",score:t.acf?.score||0,category:t.acf?.category||"NOVELA",coverUrl:t._embedded?.["wp:featuredmedia"]?.[0]?.source_url}}function c(){if(!a||!n)throw Error("WordPress credentials not configured");let t=Buffer.from(`${a}:${n}`).toString("base64");return{Authorization:`Basic ${t}`,"Content-Type":"application/json"}}async function u(){try{let t=await fetch(`${o}/posts?_embed&per_page=100&status=publish`,{next:{revalidate:60}});if(!t.ok)return[];return(await t.json()).map(s)}catch(t){return console.error("Error fetching posts:",t),[]}}async function d(t){try{let e=await fetch(`${o}/posts?slug=${t}&_embed`,{next:{revalidate:60}});if(!e.ok)return null;let r=await e.json();if(0===r.length)return null;return s(r[0])}catch(t){return console.error("Error fetching post:",t),null}}async function l(t=3){try{let e=await fetch(`${o}/posts?_embed&per_page=${t}&status=publish`,{next:{revalidate:60}});if(!e.ok)return[];return(await e.json()).map(s)}catch(t){return console.error("Error fetching latest posts:",t),[]}}async function p(){let t=await fetch(`${o}/posts?_embed&per_page=100&status=any`,{headers:c(),cache:"no-store"});if(!t.ok)throw Error("Failed to fetch posts");return(await t.json()).map(s)}async function f(t){let e=await fetch(`${o}/posts/${t}?_embed`,{headers:c(),cache:"no-store"});return e.ok?s(await e.json()):null}async function h(t){let e=await fetch(`${o}/posts`,{method:"POST",headers:c(),body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to create post");return s(await e.json())}async function w(t,e){let r=await fetch(`${o}/posts/${t}`,{method:"PUT",headers:c(),body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to update post");return s(await r.json())}async function m(t){if(!(await fetch(`${o}/posts/${t}?force=true`,{method:"DELETE",headers:c()})).ok)throw Error("Failed to delete post")}async function y(){let t=await fetch(`${o}/libro?_embed&per_page=100`,{headers:c(),cache:"no-store"});if(!t.ok)throw Error("Failed to fetch books");return(await t.json()).map(i)}async function g(t){let e=await fetch(`${o}/libro`,{method:"POST",headers:c(),body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to create book");return i(await e.json())}async function E(t,e){let r=await fetch(`${o}/libro/${t}`,{method:"PUT",headers:c(),body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to update book");return i(await r.json())}async function b(t){if(!(await fetch(`${o}/libro/${t}?force=true`,{method:"DELETE",headers:c()})).ok)throw Error("Failed to delete book")}}};var e=require("../../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),o=e.X(0,[638,206],()=>r(921));module.exports=o})();